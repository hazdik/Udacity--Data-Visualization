<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>
    

    <style>
      h2 {
        text-align: left;
        -webkit-margin-start: 45px;
      }
    </style>
    <script type="text/javascript">
      


      function draw(data) {
      
      /*
        D3.js setup code
      */

          "use strict";
          
          var margin = 75,
              width = 800 - margin,
              height = 400 - margin;


          d3.select('body')
            .append('h2')
            .text('Performance of 6 Largest U.S. Domestic Carriers from 2003 to 2015');
          
          function addText(svg, text1) {
            svg.append("text")
           .attr("x", chart._xPixels() + chart._widthPixels() / 2)
           .attr("y", chart._yPixels() - 20)
           .style("text-anchor", "middle")
           .style("font-family", "sans-serif")
           .style("font-weight", "bold")
           .text(text1);

          };
          
          var svg = d3.select("body")
            .append("svg")
              .attr("width", width + margin)
              .attr("height", height + margin)
            .append('g')
                .attr('class','chart');

          
          
      /*
        Dimple.js Chart construction code
      */
          /*
          var myChart = new dimple.chart(svg, data);
          var x = myChart.addTimeAxis("x", "year"); 
          x.tickFormat = "%Y"
          myChart.addMeasureAxis("y", "arr_del15");
          myChart.addSeries(null, dimple.plot.line);
          myChart.addSeries(null, dimple.plot.scatter);
          myChart.draw();
          */

          
          var chart = new dimple.chart(svg, data);
          var x = chart.addTimeAxis("x", "year"); 
          x.tickFormat = "%Y";
          x.title = 'Year';
          
          addText(svg, "Average Delay per Flight due to Carrier over Year for 6 Largest Carriers");

          var y = chart.addMeasureAxis("y", "avg_carrier_delay");
          y.title = "Average Delay per Flight due to Carrier (minutes)";
          chart.addSeries("carrier_name", dimple.plot.line);
          chart.addSeries("carrier_name", dimple.plot.scatter);
          chart.addLegend(width * .75, height * .81, width*0.25, 100, 'right');
          chart.draw();

          

          var svg2 = d3.select("body")
            .append("svg")
              .attr("width", width + margin)
              .attr("height", height + margin)
            .append('g')
                .attr('class','chart');

          addText(svg2, "Average Arrival Delay per Flight over Year for 6 Largest Carriers");

          var chart = new dimple.chart(svg2, data);
          var x = chart.addTimeAxis("x", "year"); 
          x.tickFormat = "%Y";
          x.title = 'Year';
          //chart.addCategoryAxis("x", "carrier_name");
          var y = chart.addMeasureAxis("y", "avg_arr_delay");
          y.title = "Average Delay per Flight (minutes)";
          chart.addSeries("carrier_name", dimple.plot.line);
          chart.addSeries("carrier_name", dimple.plot.scatter);
          chart.addLegend(width * .75, height * .81, width*0.25, 100, 'right');
          chart.draw();

          var svg3 = d3.select("body")
            .append("svg")
              .attr("width", width + margin)
              .attr("height", height + margin)
            .append('g')
                .attr('class','chart');

          addText(svg3, "Percentage of On-Time Flights over Year for 6 Largest Carriers");

          var chart = new dimple.chart(svg3, data);
          var x = chart.addTimeAxis("x", "year"); 
          x.tickFormat = "%Y";
          x.title = 'Year';
          //chart.addCategoryAxis("x", "carrier_name");
          var y = chart.addMeasureAxis("y", "avg_ontime");
          y.overrideMin = 60
          y.title = "Percentage of On-Time Flights";
          chart.addSeries("carrier_name", dimple.plot.line);
          chart.addSeries("carrier_name", dimple.plot.scatter);
          chart.addLegend(width * .75, height * .81, width*0.25, 100, 'right');
          chart.draw();
          
          var svg4 = d3.select("body")
            .append("svg")
              .attr("width", width + margin)
              .attr("height", height + margin)
            .append('g')
                .attr('class','chart');

          addText(svg4, "Percentage of Late Flight due to Carrier over Year for 6 Largest Carriers");

          var chart = new dimple.chart(svg4, data);
          var x = chart.addTimeAxis("x", "year"); 
          x.tickFormat = "%Y";
          x.title = 'Year';
          //chart.addCategoryAxis("x", "carrier_name");
          var y = chart.addMeasureAxis("y", "avg_carrier_ct");
          y.title = "Percentage of Delayed Flights due to Carrier";
          chart.addSeries("carrier_name", dimple.plot.line);
          chart.addSeries("carrier_name", dimple.plot.scatter);
          chart.addLegend(width * .75, height * .81, width*0.25, 100, 'right');
          chart.draw();

          var svg5 = d3.select("body")
            .append("svg")
              .attr("width", width + margin)
              .attr("height", height + margin)
            .append('g')
                .attr('class','chart');

          addText(svg5, "Percentage of Delayed Flights over Year for 6 Largest Carriers");



          var chart = new dimple.chart(svg5, data);
          var x = chart.addTimeAxis("x", "year"); 
          x.tickFormat = "%Y";
          x.title = 'Year';
          //chart.addCategoryAxis("x", "carrier_name");
          var y = chart.addMeasureAxis("y", "avg_arr_del15");
          y.title = "Percentage of Delayed Flights";
          chart.addSeries("carrier_name", dimple.plot.line);
          chart.addSeries("carrier_name", dimple.plot.scatter);
          chart.addLegend(width * .75, height * .81, width*0.25, 100, 'right');
          chart.draw();

        };
      </script>
  </head>
<body>
  <div class="container">
    <div class="row">
      <section id="content" class="col-md-12"></section>
    </div>
  </div>
  <script type="text/javascript">
  /*
    Use D3 (not dimple.js) to load the TSV file
    and pass the contents of it to the draw function
    */
  //d3.tsv("airline_delays.csv", draw);
  
  d3.csv("summary_airlines.csv", draw);
  </script>
</body>
</html>
